---
- name: Apply garage core network baseline
  ansible.builtin.include_role:
    name: router_garage

- name: Apply garage tailscale profile
  ansible.builtin.include_role:
    name: tailscale_openwrt
  vars:
    tailscale_hostname: "{{ services.tailscale.garage.hostname }}"
    tailscale_advertise_exit_node: "{{ services.tailscale.garage.advertise_exit_node }}"
    tailscale_advertise_routes: "{{ services.tailscale.garage.advertise_routes }}"

- name: Apply garage AdGuard Home profile
  ansible.builtin.include_role:
    name: adguard_home_openwrt

- name: Apply garage WireGuard policy-routing profile
  ansible.builtin.include_role:
    name: wireguard_policy_openwrt
